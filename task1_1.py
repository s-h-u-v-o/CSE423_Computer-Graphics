from OpenGL.GL import *     
from OpenGL.GLUT import *   
from OpenGL.GLU import *    
import random

ball_x, ball_y = 0, 0        
ball_speed_x = 0
ball_speed_y = 0.01              
r = g = b = 0.0
flag = False

def draw_point(x, y):
    glBegin(GL_LINES)
    glVertex2f(x, y)
    glVertex2f(x+(ball_speed_x*10), y+30)
    glEnd()
    
def draw_line(x1, y1, x2, y2):
    glBegin(GL_LINES)
    glVertex2f(x1, y1)
    glVertex2f(x2, y2)
    glEnd()

def draw_points(x, y):
    glPointSize(10)          
    glBegin(GL_TRIANGLES)     
    glVertex2f(x, y)       
    glVertex2f(x+500, y)        
    glVertex2f(x+250, y+150)        
    glEnd()                 
    glBegin(GL_POINTS)
    glVertex2f(x+270, y-145)
    glEnd()

def draw_shapes():          
    glBegin(GL_TRIANGLES)              
    glColor3f(r, g, b) 
    glVertex2d(0, 1000)
    glVertex2d(0, 750)          
    glVertex2d(1000, 750)    
    glEnd()
    glBegin(GL_TRIANGLES)                     
    glColor3f(r, g, b)
    glVertex2d(0, 1000)
    glVertex2d(1000, 750)       
    glVertex2d(1000, 1000)
    glEnd()
    glBegin(GL_TRIANGLES)              
    glColor3f(0.43, 0.35, 0.12)
    glVertex2d(0, 750)
    glVertex2d(0, 0)       
    glVertex2d(1000, 0)
    glEnd()
    glBegin(GL_TRIANGLES)              
    glColor3f(0.43, 0.35, 0.12)
    glVertex2d(0, 750)
    glVertex2d(1000, 750)       
    glVertex2d(1000, 0)
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(0, 600)
    glColor3f(0, 1, 0)
    glVertex2d(100, 600)
    glColor3f(1, 0, 0)
    glVertex2d(50, 750)
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(100, 600)
    glColor3f(0, 1, 0)
    glVertex2d(200, 600)
    glColor3f(1, 0, 0)
    glVertex2d(150, 750)
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(200, 600)
    glColor3f(0, 1, 0)         
    glVertex2d(300, 600)
    glColor3f(1, 0, 0)
    glVertex2d(250, 750)          
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(300, 600)
    glColor3f(0, 1, 0)
    glVertex2d(400, 600)
    glColor3f(1, 0, 0)
    glVertex2d(350, 750)         
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(400, 600)
    glColor3f(0, 1, 0)         
    glVertex2d(500, 600)
    glColor3f(1, 0, 0)
    glVertex2d(450, 750)
    glEnd()
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(500, 600)
    glColor3f(0, 1, 0)
    glVertex2d(600, 600)
    glColor3f(1, 0, 0)
    glVertex2d(550, 750)
    glEnd()
    glBegin(GL_TRIANGLES)       
    glColor3f(0, 1, 0)
    glVertex2d(600, 600)
    glColor3f(0, 1, 0)
    glVertex2d(700, 600)
    glColor3f(1, 0, 0)
    glVertex2d(650, 750)
    glEnd()
    glBegin(GL_TRIANGLES)          
    glColor3f(0, 1, 0)       
    glVertex2d(700, 600)      
    glColor3f(0, 1, 0)
    glVertex2d(800, 600)          
    glColor3f(1, 0, 0)
    glVertex2d(750, 750)
    glEnd()       
    glBegin(GL_TRIANGLES)
    glColor3f(0, 1, 0)
    glVertex2d(800, 600)           
    glColor3f(0, 1, 0)
    glVertex2d(900, 600)
    glColor3f(1, 0, 0)         
    glVertex2d(850, 750)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0, 1, 0)
    glVertex2d(900, 600)
    glColor3f(0, 1, 0)         
    glVertex2d(1000, 600)          
    glColor3f(1, 0, 0)
    glVertex2d(950, 750)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0.93, 0.85, 0.92)
    glVertex2d(280, 620)        
    glVertex2d(280, 400)          
    glVertex2d(720, 400)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0.93, 0.85, 0.92)
    glVertex2d(280, 620)        
    glVertex2d(720, 620)          
    glVertex2d(720, 400)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(345, 570)        
    glVertex2d(345, 500)          
    glVertex2d(420, 500)
    glEnd()
    glBegin(GL_TRIANGLES)       
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(345, 570)        
    glVertex2d(420, 570)          
    glVertex2d(420, 500)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(580, 570)        
    glVertex2d(580, 500)          
    glVertex2d(655, 500)
    glEnd()
    glBegin(GL_TRIANGLES)       
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(580, 570)        
    glVertex2d(655, 570)          
    glVertex2d(655, 500)
    glEnd()
    glBegin(GL_TRIANGLES)        
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(465, 550)        
    glVertex2d(465, 400)          
    glVertex2d(535, 400)
    glEnd()
    glBegin(GL_TRIANGLES)       
    glColor3f(0.0, 0.0, 1.0)
    glVertex2d(465, 550)        
    glVertex2d(535, 550)          
    glVertex2d(535, 400)
    glEnd() 

def keyboard_listener(key, x, y):
    global flag
    if key == b'f':
        flag = not flag
    glutPostRedisplay()

def special_key_listener(key, x, y):   
    global ball_speed_x
    if key == GLUT_KEY_RIGHT:
        ball_speed_x -= 1
    elif key == GLUT_KEY_LEFT:
        ball_speed_x += 1
    glutPostRedisplay()

def setup_projection():
    glViewport(0, 0, 1000, 1000)    
    glMatrixMode(GL_PROJECTION)   
    glLoadIdentity()               
    glOrtho(0, 1000, 0, 1000, 0, 1)  
    glMatrixMode(GL_MODELVIEW)      

def animate():
    global ball_x, ball_y, ball_speed_x, ball_speed_y, r, g, b, flag 
    ball_x = (ball_x - ball_speed_x) % 100
    ball_y = (ball_y - ball_speed_y) % 100    

    if flag and r < 1.0 and g < 1.0 and b < 1.0:
        r += 0.001
        g += 0.001   
        b += 0.001
    else:       
        r -= 0.001
        g -= 0.001
        b -= 0.001
    glutPostRedisplay()

def display():
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT) 
    glLoadIdentity()      
    setup_projection()   
    draw_shapes()
    glColor3f(0.0, 0.0, 0.6)                   
    draw_points(250, 620)                 
    glColor3f(0.0, 0.0, 0.1) 
    draw_line(345, 535, 420, 535)   
    draw_line(345, 534, 420, 534)   
    draw_line(345, 536, 420, 536)   
    draw_line(384, 570, 384, 500)        
    draw_line(383, 570, 383, 500)
    draw_line(382, 570, 382, 500)
    draw_line(580, 536, 655, 536)     
    draw_line(580, 535, 655, 535)
    draw_line(580, 534, 655, 534)
    draw_line(618, 570, 618, 500)
    draw_line(617, 570, 617, 500)
    draw_line(616, 570, 616, 500)             
    glColor3f(0.6, 0.7, 1.0)   
    draw_point(ball_x+random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x+random.randrange(1, 999), ball_y-random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y-random.randrange(1, 999))              
    draw_point(ball_x+random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x+random.randrange(1, 999), ball_y-random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y-random.randrange(1, 999))             
    draw_point(ball_x+random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x+random.randrange(1, 999), ball_y-random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y+random.randrange(1, 999))    
    draw_point(ball_x-random.randrange(1, 999), ball_y-random.randrange(1, 999))                
    glutSwapBuffers()   

def main():
    glutInit()         
    glutInitDisplayMode(GLUT_RGBA)  
    glutInitWindowSize(1000, 1000) 
    glutInitWindowPosition(0, 0)    
    glutCreateWindow(b"OpenGL 2D Point")  
    glutDisplayFunc(display)    
    glutIdleFunc(animate)
    glutKeyboardFunc(keyboard_listener)
    glutSpecialFunc(special_key_listener)
    glutMainLoop()        

if __name__ == "__main__":
    main()